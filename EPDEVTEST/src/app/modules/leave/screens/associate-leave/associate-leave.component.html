<div class="time_sheet p-r-0" >
    <!-- breadcrumb_list -->
    <div class="breadcrumb_list">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="https://ep.suneratech.com/Home/Dashboard">Home</a></li>
            <li class="breadcrumb-item"><a href="/modules/#/leave">Associate Request List</a></li>
        </ol>
    </div>
    <!-- breadcrumb_list-End-->

    <!-- time_sheet_heading -->
    <app-page-header from="TEAM" [onLeaves]="onLeaves" headingText='Associate Request List'></app-page-header>
    <!-- time_sheet_heading-End-->

    <!-- Apply Leave page -->
    <app-preloader class="go-center go-center-body" *ngIf="isLoading"></app-preloader>
    <div class="apply_leave_page">
        <div class="table_header row">
            <div class="col-3"><span class="title_tabe">Request List</span>
              </div>
            <div class="col-9" style="padding: 0 30px 10px 0">
               
                <div class="history_filter">
                    <button class="btn_1 btn_history_filter float-right open-filters"  (click)="showDropDown=!showDropDown">
                        History Filter<span></span>
                    </button>
                    <div id="filtersWrap" class="filter_block"   [ngStyle]="showDropDown  ? { 'display' : 'block' }    : ''  ">
                        <a style="cursor:pointer" (click)="showDropDown=!showDropDown" class="close_btn hide-filters"><img src="assets/images/leave/icon-close.png" alt=""></a>
                        <hr>
                        
                        <div class="col-12 display_inline ">
                            <span class="filter_heading">Status</span>
                           
                            <div class="element_input statusListcont filter_selectboxs">
                                <div *ngFor="let s of statusList; let i=index;" class="p-field-checkbox m-b-5">
                                    <p-checkbox class="checkbox_1" name="inprogress" value={{s.value}} [(ngModel)]="filter.status" inputId={{s.value}}status></p-checkbox>
                                    <label class="p-l-10" for='{{s.value}}status'> {{s.label}} </label>
                                </div>
                                <!-- <p-multiSelect selectionLimit="1" [options]="statusList" maxSelectedLabels="1"
                                    placeholder="Select  Status" width="100px" selectionLimit="100"
                                    [(ngModel)]="filter.status"></p-multiSelect> -->
                                    
                            </div>
                        </div>
                        <div class="col-12 display_inline">
                            <span class="filter_heading">Leave Types</span>
                            <div class="element_input statusListcont filter_selectboxs">
                                <!-- <p-multiSelect selectionLimit="1" [options]="leaveTyps" maxSelectedLabels="1"
                                    placeholder="Select  Status" width="100px" selectionLimit="100"
                                    [(ngModel)]="filter.type"></p-multiSelect> -->

                                    <div *ngFor="let l of leaveTyps; let i=index;" class="p-field-checkbox m-b-5">
                                        <p-checkbox  class="checkbox_1" name="inprogress" value={{l.value}} [(ngModel)]="filter.type" inputId='{{l.value}}leaveType'></p-checkbox>
                                        <label class="p-l-10" for='{{l.value}}leaveType'> {{l.label}} </label>
                                    </div>
                            </div>
                        </div>
                        <div class="col-12 display_inline">
                            <span class="filter_heading">Start Date</span>
                            <div class="element_input">
                                <p-calendar dateFormat="mm/dd/yy" [readonlyInput]="true" placeholder="MM/DD/YY"
                                    [(ngModel)]="filter.fromDate"></p-calendar>
                            </div>
                        </div>
                        <div class="col-12 display_inline" style="margin: 5px 0 10px 0;">
                            <span class="filter_heading">End Date</span>
                            <div class="element_input">
                                <p-calendar dateFormat="mm/dd/yy" [readonlyInput]="true" [minDate]="filter.fromDate" placeholder="MM/DD/YY"
                                    [(ngModel)]="filter.toDate"></p-calendar>
                            </div>
                        </div>
                        <div class="col-12 display_inline">
                            <div class="filter_btns">
                                <button class="btn btn-sm" (click)="showDropDown=!showDropDown;onFilter()">Apply</button>
                                <button class="btn btn-sm reset_btn" (click)="reset()"></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--
                <div class="col-10  filter_style">
                    <div class="row">
                        <div class="col-2 display_inline">
                            <label>&nbsp;&nbsp;&nbsp;Status</label>
                            <div class="">
                                <p-multiSelect selectionLimit="1" [options]="statusList" maxSelectedLabels="1" placeholder="Select  Status"
                                    width="100px" selectionLimit="100" [(ngModel)]="filter.status"></p-multiSelect>
                            </div>
                        </div>
                        <div class="col-2 display_inline">
                            <label>Leave Types</label>
                            <div class="">
                                <p-multiSelect  selectionLimit="1" [options]="leaveTyps" maxSelectedLabels="1" placeholder="Select  Status"
                                    width="100px" selectionLimit="100" [(ngModel)]="filter.type"></p-multiSelect>
                            </div>
                        </div>
                        <div class="col-3 display_inline">
                            <label>Start Date</label>
                            <div class="">
                                <p-calendar dateFormat="mm/dd/yy" [readonlyInput]="true" placeholder="mm/dd/yy"
                                    [(ngModel)]="filter.fromDate"></p-calendar>
                                
                            </div>
                        </div>
                        <div class="col-3 display_inline">
                            <label>End Date</label>
                            <div class="">
                                <p-calendar dateFormat="mm/dd/yy" [readonlyInput]="true" placeholder="mm/dd/yy"
                                    [(ngModel)]="filter.toDate"></p-calendar>
                            </div>
                        </div>
                        <div class="col-2 display_inline">
                            <button class="btn btn-success btn-sm" (click)="onFilter()">Apply</button>
                            <button class="btn btn-primary  btn-sm" style="margin-left:5px;" (click)="reset()">Reset</button>
                        </div>
                    </div>

                </div>
                 -->
        </div>
        <!-- Apply Leave form page -->
        <!-- <app-apply-leave></app-apply-leave> -->
        <!-- Apply Leave form -->
        <!-- Leave Applied History -->


        <section class="leave_history">
            <!-- <div class="table_header row">
                    <div class="col-6">
                        <span class="title_tabe">Applied History</span>
                    </div>
                    <div class="col-6">
                        <button class="btn_1 float-right">
                            History Filter<span><img src="assets/images/filter_icon.png" alt=""></span>
                        </button>
                    </div>
                </div> -->
            <div class="leave_history_table">

                <!-- <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th scope="col"><input (change)="checkAll()"     type="checkbox"/></th>
                                <th scope="col">Avatar</th>
                                <th scope="col">Employee Name</th>
                                <th scope="col">Request Type</th>
                                <th scope="col">From Date</th>
                                <th scope="col">To Date</th>
                                <th scope="col">No. of Days</th>
                                <th scope="col">Status</th>
                            </tr>
                        </thead>
                        <tbody  *ngIf="!isLoading">
                            <tr *ngFor="let s of list; let i=index;">
                                <td><input (change)="checkCount(s,i)"  [attr.checked]="s['isChecked']"   *ngIf="s.leaveStatus!=2 && s.leaveStatus!=3 && s.leaveStatus!=4" type="checkbox"/></td>
                                <td><img src="{{s.avatar}}" alt="avatar" class="leave_avatar"></td>
                                <td>{{s.empName}}</td>
                                <td>{{s.leaveType}}</td>
                                <td>{{formatDate(s.fromDate)}}</td>
                                <td>{{formatDate(s.toDate)}}</td>
                                <td>{{s.strNumber_of_Days}}</td>
                                <td>{{s.leaveStatusDesc}}</td>
                            </tr>
                           
                        </tbody>
                    </table> -->
<div class="mat-elevation-z8">
                <table mat-table [dataSource]="data" class="table table-bordered" matSort matSortActive="fromDate"
                    matSortDisableClear matSortDirection="desc">
                    <!-- Number Column -->
                    
                    <ng-container matColumnDef="action">
                        <th mat-header-cell *matHeaderCellDef class="checkbox_style2 checkmark_td" >
                            <label class="check_mng">
                                <input (change)="checkAll($event)" type="checkbox" class="" />
                                <span class="checkmark"></span>
                            </label>
                            
                        </th>
                        <td mat-cell *matCellDef="let s; let i = index;"  class="checkbox_style2 checkmark_td">
                            <label class="check_mng"  *ngIf="s.leaveStatus!=2 && s.leaveStatus!=3 && s.leaveStatus!=4">
                                <input (change)="checkCount(s,i)"  [checked]="s['isChecked']" class=""  type="checkbox" />
                                <span class="checkmark"></span>
                            </label>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="avathar">
                        <th mat-header-cell *matHeaderCellDef>Avatar</th>
                        <td mat-cell *matCellDef="let s">
                           <img src="{{checkImage(s.avatar)}}" alt="associate avatar" class="leave_avatar">
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="empName">
                        <th mat-header-cell *matHeaderCellDef class="td-one">Employee Name</th>
                        <td mat-cell *matCellDef="let s" class="td-one">{{s.empName}}</td>
                    </ng-container>

                    <!-- Title Column -->
                    <ng-container matColumnDef="leaveType">
                        <th mat-header-cell *matHeaderCellDef class="td-one">Request Type</th>
                        <td mat-cell *matCellDef="let s" class="td-one">{{s.leaveType}}</td>
                    </ng-container>

                    <!-- State Column -->
                    <ng-container matColumnDef="fromDate">
                        <th mat-header-cell *matHeaderCellDef class="td-one">From Date<span> ( MM / DD / YY )</span></th>
                        <td mat-cell *matCellDef="let s" class="td-one">{{formatDate(s.fromDate)}}</td>
                    </ng-container>

                    <!-- toDate Column -->
                    <ng-container matColumnDef="toDate">
                        <th mat-header-cell *matHeaderCellDef class="td-one">To Date<span> ( MM / DD / YY )</span></th>
                        <td mat-cell *matCellDef="let s" class="td-one">{{formatDate(s.toDate)}}</td>
                    </ng-container>

                    <!-- strNumber_of_Days Column -->
                    <ng-container matColumnDef="strNumber_of_Days">
                        <th mat-header-cell *matHeaderCellDef>No.of Days</th>
                        <td mat-cell *matCellDef="let s">{{s.strNumber_of_Days}}</td>
                    </ng-container>

                    <!-- strNumber_of_Days Column -->
                    <ng-container matColumnDef="leaveStatusDesc">
                        <th mat-header-cell *matHeaderCellDef>Status</th>
                        <td mat-cell *matCellDef="let s">{{s.leaveStatusDesc}}</td>
                    </ng-container>

                    <!-- strNumber_of_Days Column -->
                  

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            
                <p style="text-align:center;margin-top: 5%;" *ngIf="list.length===0  && !isLoading">No Data Found</p>
                <mat-paginator [pageIndex]="0"
                [pageSize]="10"  [length]="resultsLength" ></mat-paginator>
              
               </div>
            </div>

            <div class="fotterbtn">
                <div class="pull-right">
                    <button (click)="leaveApprove(3)" [disabled]="isLoading"
                        class="btn btn-danger btn-sm m-w-100 btn-style mr-10">REJECT</button>
                    <button (click)="leaveApprove(2)" [disabled]="isLoading"
                        class="btn btn-success mr-3 btn-sm  m-w-100 btn-style">APPROVE</button>

                </div>
            </div>
        </section>
        <!-- Leave Applied History end -->
    </div>
    <!-- Leave page end -->
</div>
<p-confirmDialog header="Confirmation" appendTo="body"></p-confirmDialog>